<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DHT11 Live Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <h2>🌡️ Temperature & 💧 Humidity Monitor</h2>
  <canvas id="sensorChart" width="700" height="350"></canvas>

  <script>
    const ctx = document.getElementById("sensorChart").getContext("2d");
    const chart = new Chart(ctx, {
      type: "line",
      data: {
        labels: [],
        datasets: [
          { label: "Temperature (°C)", borderColor: "red", data: [], fill: false },
          { label: "Humidity (%)", borderColor: "blue", data: [], fill: false }
        ]
      },
      options: { scales: { y: { beginAtZero: true } } }
    });

    function updateData() {
      fetch("http://YOUR_RASPI_IP:5000/data")  <!-- 🔹 change this -->
        .then(res => res.json())
        .then(data => {
          const now = new Date().toLocaleTimeString();
          chart.data.labels.push(now);
          chart.data.datasets[0].data.push(data.temperature);
          chart.data.datasets[1].data.push(data.humidity);

          if (chart.data.labels.length > 10) {
            chart.data.labels.shift();
            chart.data.datasets[0].data.shift();
            chart.data.datasets[1].data.shift();
          }
          chart.update();
        })
        .catch(err => console.error("Error fetching data:", err));
    }
    setInterval(updateData, 2000);
  </script>
</body>
</html>
